<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerente - Painel do Estabelecimento</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --sidebar-width: 250px;
            --topbar-height: 60px;
        }

        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            position: fixed;
            background: #2c3e50;
            transition: all 0.3s;
        }

        .topbar {
            height: var(--topbar-height);
            margin-left: var(--sidebar-width);
        }

        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            margin-top: var(--topbar-height);
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            border-left: 3px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border-left: 3px solid #3498db;
        }

        .calendar-day {
            height: 100px;
            border: 1px solid #dee2e6;
            position: relative;
        }

        .calendar-day:hover {
            background-color: #f8f9fa;
        }

        .appointment-badge {
            font-size: 0.7rem;
            margin-bottom: 2px;
        }

        .table td {
            vertical-align: middle;
        }

        .badge.bg-warning.text-dark {
            background-color: #ffc107 !important;
        }

        /* Ajustes para o modal */
        .modal-body .form-control {
            margin-bottom: 0.5rem;
        }

        .modal-body .row {
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar d-flex flex-column">
        <div class="p-3 text-white">
            <h4 class="text-center">Meu Estabelecimento</h4>
            <hr class="bg-light">
        </div>
        <ul class="nav flex-column flex-grow-1">
            <li class="nav-item">
                <a class="nav-link active" href="#">
                    <i class="bi bi-calendar-check me-2"></i> Agenda
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="bi bi-people me-2"></i> Clientes
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="bi bi-scissors me-2"></i> Serviços
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="bi bi-cash-coin me-2"></i> Financeiro
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="bi bi-envelope me-2"></i> Marketing
                </a>
            </li>
            <li class="nav-item mt-auto">
                <a class="nav-link" href="#">
                    <i class="bi bi-gear me-2"></i> Configurações
                </a>
            </li>
        </ul>
    </div>

    <!-- Topbar -->
    <nav class="topbar navbar navbar-expand navbar-dark bg-primary shadow-sm">
        <div class="container-fluid">
            <span class="navbar-brand">Salão Bella</span>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="bi bi-person-circle me-1"></i> Gerente
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i> Perfil</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i> Sair</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="mb-0">Ana Silva</h2>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Clientes</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Detalhes</li>
                        </ol>
                    </nav>
                </div>
                <div>
                    <button class="btn btn-outline-secondary me-2" onclick="window.print()">
                        <i class="bi bi-printer"></i> Imprimir
                    </button>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editarClienteModal">
                        <i class="bi bi-pencil"></i> Editar
                    </button>
                </div>
            </div>

            <div class="row">
                <!-- Coluna Esquerda -->
                <div class="col-md-4">
                    <!-- Card de Informações Pessoais -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Informações Pessoais</h5>
                        </div>
                        <div class="card-body text-center">
                            <img src="https://ui-avatars.com/api/?name=Ana+Silva&background=0d6efd&color=fff&size=100"
                                class="rounded-circle mb-3" alt="Foto do Cliente">

                            <div class="mb-3">
                                <span class="badge bg-warning text-dark">Cliente Prata</span>
                                <span class="badge bg-success ms-1">Ativo</span>
                            </div>

                            <div class="text-start">
                                <div class="mb-2">
                                    <strong>E-mail:</strong>
                                    <div>ana.silva@exemplo.com</div>
                                </div>
                                <div class="mb-2">
                                    <strong>Telefone:</strong>
                                    <div>(11) 98765-4321</div>
                                </div>
                                <div class="mb-2">
                                    <strong>CPF:</strong>
                                    <div>123.456.789-00</div>
                                </div>
                                <div class="mb-2">
                                    <strong>Data Nasc.:</strong>
                                    <div>15/05/1985</div>
                                </div>
                                <div>
                                    <strong>Endereço:</strong>
                                    <div>Rua das Flores, 123 - Apto 21<br>São Paulo/SP</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card de Preferências -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Preferências</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <h6>Profissional Preferido</h6>
                                <div class="d-flex align-items-center">
                                    <img src="https://ui-avatars.com/api/?name=Carlos+Andrade&size=40"
                                        class="rounded-circle me-2" alt="Profissional">
                                    <span>Carlos Andrade</span>
                                </div>
                            </div>
                            <div class="mb-3">
                                <h6>Serviços Frequentes</h6>
                                <ul class="list-unstyled">
                                    <li><i class="bi bi-check-circle text-success me-2"></i>Corte Feminino</li>
                                    <li><i class="bi bi-check-circle text-success me-2"></i>Hidratação</li>
                                </ul>
                            </div>
                            <div>
                                <h6>Comunicação</h6>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="receberEmail" checked>
                                    <label class="form-check-label" for="receberEmail">Aceita e-mails</label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="receberWhatsapp" checked>
                                    <label class="form-check-label" for="receberWhatsapp">Aceita WhatsApp</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna Direita -->
                <div class="col-md-8">
                    <!-- Abas de Navegação -->
                    <ul class="nav nav-tabs mb-4" id="clienteTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="agendamentos-tab" data-bs-toggle="tab"
                                data-bs-target="#agendamentos" type="button">
                                Agendamentos (12)
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="compras-tab" data-bs-toggle="tab" data-bs-target="#compras"
                                type="button">
                                Compras (5)
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="historico-tab" data-bs-toggle="tab" data-bs-target="#historico"
                                type="button">
                                Histórico Completo
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="anotacoes-tab" data-bs-toggle="tab" data-bs-target="#anotacoes"
                                type="button">
                                Anotações
                            </button>
                        </li>
                    </ul>

                    <!-- Conteúdo das Abas -->
                    <div class="tab-content" id="clienteTabContent">
                        <!-- Aba Agendamentos -->
                        <div class="tab-pane fade show active" id="agendamentos" role="tabpanel">
                            <button class="btn btn-primary mb-3" data-bs-toggle="modal"
                                data-bs-target="#agendamentoRapidoModal">
                                <i class="bi bi-plus-lg me-1"></i> Novo Agendamento
                            </button>

                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Data/Hora</th>
                                            <th>Serviço</th>
                                            <th>Profissional</th>
                                            <th>Valor</th>
                                            <th>Status</th>
                                            <th>Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>15/06/2023 09:00</td>
                                            <td>Corte Feminino</td>
                                            <td>Carlos Andrade</td>
                                            <td>R$ 80,00</td>
                                            <td><span class="badge bg-success">Concluído</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary">
                                                    <i class="bi bi-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <!-- Mais agendamentos... -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Aba Compras -->
                        <div class="tab-pane fade" id="compras" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>Produto</th>
                                            <th>Quantidade</th>
                                            <th>Valor</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>10/06/2023</td>
                                            <td>Shampoo Hidratante</td>
                                            <td>2</td>
                                            <td>R$ 89,90</td>
                                            <td><span class="badge bg-success">Entregue</span></td>
                                        </tr>
                                        <!-- Mais compras... -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Aba Histórico Completo -->
                        <div class="tab-pane fade" id="historico" role="tabpanel">
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-badge bg-primary"></div>
                                    <div class="timeline-content">
                                        <small class="text-muted">Hoje, 14:30</small>
                                        <p><strong>Atualização de cadastro</strong> - Telefone alterado</p>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-badge bg-success"></div>
                                    <div class="timeline-content">
                                        <small class="text-muted">15/06/2023 09:00</small>
                                        <p><strong>Agendamento concluído</strong> - Corte Feminino com Carlos</p>
                                    </div>
                                </div>
                                <!-- Mais itens de histórico... -->
                            </div>
                        </div>

                        <!-- Aba Anotações -->
                        <div class="tab-pane fade" id="anotacoes" role="tabpanel">
                            <div class="mb-3">
                                <textarea class="form-control" rows="5"
                                    placeholder="Adicione uma nova anotação..."></textarea>
                                <button class="btn btn-primary mt-2">Salvar Anotação</button>
                            </div>
                            <div class="list-group">
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between">
                                        <strong>Preferência por produtos orgânicos</strong>
                                        <small class="text-muted">12/06/2023</small>
                                    </div>
                                    <p class="mb-0">Cliente relatou alergia a produtos com parabenos</p>
                                </div>
                                <!-- Mais anotações... -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Edição de Cliente -->
    <div class="modal fade" id="editarClienteModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">Editar Cliente</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formEditarCliente">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="editNome" class="form-label">Nome Completo*</label>
                                <input type="text" class="form-control" id="editNome" value="Ana Silva" required>
                            </div>
                            <div class="col-md-6">
                                <label for="editEmail" class="form-label">E-mail*</label>
                                <input type="email" class="form-control" id="editEmail" value="ana.silva@exemplo.com"
                                    required>
                            </div>
                            <div class="col-md-6">
                                <label for="editTelefone" class="form-label">Telefone*</label>
                                <input type="tel" class="form-control" id="editTelefone" value="(11) 98765-4321"
                                    required>
                            </div>
                            <div class="col-md-6">
                                <label for="editCpf" class="form-label">CPF</label>
                                <input type="text" class="form-control" id="editCpf" value="123.456.789-00">
                            </div>
                            <div class="col-md-6">
                                <label for="editNascimento" class="form-label">Data Nascimento</label>
                                <input type="date" class="form-control" id="editNascimento" value="1985-05-15">
                            </div>
                            <div class="col-md-6">
                                <label for="editSegmento" class="form-label">Segmento</label>
                                <select class="form-select" id="editSegmento">
                                    <option>Bronze</option>
                                    <option selected>Prata</option>
                                    <option>Ouro</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label for="editEndereco" class="form-label">Endereço</label>
                                <input type="text" class="form-control" id="editEndereco"
                                    value="Rua das Flores, 123 - Apto 21">
                            </div>
                            <div class="col-md-6">
                                <label for="editCidade" class="form-label">Cidade</label>
                                <input type="text" class="form-control" id="editCidade" value="São Paulo">
                            </div>
                            <div class="col-md-3">
                                <label for="editEstado" class="form-label">Estado</label>
                                <select class="form-select" id="editEstado">
                                    <option selected>SP</option>
                                    <!-- Outros estados... -->
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="editCep" class="form-label">CEP</label>
                                <input type="text" class="form-control" id="editCep" value="01234-567">
                            </div>
                            <div class="col-12">
                                <label for="editObservacoes" class="form-label">Observações</label>
                                <textarea class="form-control" id="editObservacoes"
                                    rows="3">Cliente preferencial</textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnSalvarEdicao">Salvar Alterações</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Agendamento Rápido -->
    <div class="modal fade" id="agendamentoRapidoModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">Novo Agendamento para Ana Silva</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formAgendamentoRapido">
                        <div class="mb-3">
                            <label for="agendamentoServico" class="form-label">Serviço*</label>
                            <select class="form-select" id="agendamentoServico" required>
                                <option value="">Selecione...</option>
                                <option>Corte Feminino</option>
                                <option>Hidratação</option>
                                <option>Coloração</option>
                                <option>Manicure</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="agendamentoProfissional" class="form-label">Profissional*</label>
                            <select class="form-select" id="agendamentoProfissional" required>
                                <option value="">Selecione...</option>
                                <option selected>Carlos Andrade</option>
                                <option>Juliana Santos</option>
                            </select>
                        </div>
                        <div class="row g-2 mb-3">
                            <div class="col-md-6">
                                <label for="agendamentoData" class="form-label">Data*</label>
                                <input type="date" class="form-control" id="agendamentoData" required>
                            </div>
                            <div class="col-md-6">
                                <label for="agendamentoHora" class="form-label">Hora*</label>
                                <input type="time" class="form-control" id="agendamentoHora" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="agendamentoObservacoes" class="form-label">Observações</label>
                            <textarea class="form-control" id="agendamentoObservacoes" rows="2"></textarea>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="agendamentoConfirmar" checked>
                            <label class="form-check-label" for="agendamentoConfirmar">
                                Enviar confirmação por WhatsApp
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnConfirmarAgendamento">Confirmar
                        Agendamento</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuração inicial da data no modal de agendamento
        document.getElementById('agendamentoData').valueAsDate = new Date();

        // Validação do formulário de edição
        document.getElementById('btnSalvarEdicao').addEventListener('click', function () {
            const form = document.getElementById('formEditarCliente');
            if (!form.checkValidity()) {
                alert('Por favor, preencha os campos obrigatórios');
                return;
            }

            // Simulação de salvamento
            alert('Alterações salvas com sucesso!');
            bootstrap.Modal.getInstance(document.getElementById('editarClienteModal')).hide();
        });

        // Validação do formulário de agendamento rápido
        document.getElementById('btnConfirmarAgendamento').addEventListener('click', function () {
            const form = document.getElementById('formAgendamentoRapido');
            if (!form.checkValidity()) {
                alert('Por favor, preencha todos os campos obrigatórios');
                return;
            }

            // Simulação de agendamento
            const agendamento = {
                cliente: 'Ana Silva',
                servico: document.getElementById('agendamentoServico').value,
                profissional: document.getElementById('agendamentoProfissional').value,
                data: document.getElementById('agendamentoData').value,
                hora: document.getElementById('agendamentoHora').value,
                observacoes: document.getElementById('agendamentoObservacoes').value
            };

            console.log('Novo agendamento:', agendamento);
            alert('Agendamento realizado com sucesso!');
            bootstrap.Modal.getInstance(document.getElementById('agendamentoRapidoModal')).hide();
        });

        // Máscaras para os campos (reutilizando as funções anteriores)
        document.getElementById('editTelefone').addEventListener('input', function (e) {
            // Mesma função de máscara do telefone usada anteriormente
        });

        document.getElementById('editCpf').addEventListener('input', function (e) {
            // Mesma função de máscara do CPF usada anteriormente
        });

        document.getElementById('editCep').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 8) value = value.substring(0, 8);
            if (value.length > 5) {
                value = value.replace(/^(\d{5})(\d)/, '$1-$2');
            }
            e.target.value = value;
        });
    </script>

    <style>
        /* Estilos para a timeline */
        .timeline {
            position: relative;
            padding-left: 20px;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 15px;
            border-left: 2px solid #dee2e6;
            padding-left: 20px;
        }

        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }

        .timeline-badge {
            position: absolute;
            left: -11px;
            top: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
        }

        .timeline-content {
            padding-left: 10px;
        }

        /* Ajustes para os modais */
        .modal-body .form-control,
        .modal-body .form-select {
            margin-bottom: 1rem;
        }
    </style>




    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Validação e envio do formulário
        document.getElementById('btnSalvarCliente').addEventListener('click', function () {
            const form = document.getElementById('formCliente');
            if (!form.checkValidity()) {
                alert('Por favor, preencha os campos obrigatórios (Nome, E-mail e Telefone)');
                return;
            }

            // Simulação de cadastro - substituir por AJAX na implementação real
            const novoCliente = {
                nome: document.getElementById('clienteNome').value,
                email: document.getElementById('clienteEmail').value,
                telefone: document.getElementById('clienteTelefone').value,
                cpf: document.getElementById('clienteCpf').value,
                nascimento: document.getElementById('clienteNascimento').value,
                observacoes: document.getElementById('clienteObservacoes').value,
                aceitaMkt: document.getElementById('clienteAceitaMkt').checked
            };

            console.log('Cliente a ser cadastrado:', novoCliente);
            alert('Cliente cadastrado com sucesso!');

            // Fechar o modal
            bootstrap.Modal.getInstance(document.getElementById('novoClienteModal')).hide();

            // Limpar formulário
            form.reset();
        });

        // Máscara para telefone (simplificada)
        document.getElementById('clienteTelefone').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 11) value = value.substring(0, 11);

            if (value.length > 0) {
                value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
                if (value.length > 10) {
                    value = value.replace(/(\d)(\d{4})$/, '$1-$2');
                } else {
                    value = value.replace(/(\d)(\d{3})$/, '$1-$2');
                }
            }

            e.target.value = value;
        });

        // Máscara para CPF (simplificada)
        document.getElementById('clienteCpf').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 11) value = value.substring(0, 11);

            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');

            e.target.value = value;
        });
    </script>
</body>

</html>